{"bsonType":"object","required":["name","address"],"permission":{"read":true,"create":"'admin' in auth.role","update":"'admin' in auth.role || 'property' in auth.role","delete":"'admin' in auth.role"},"properties":{"_id":{"description":"自动生成的社区ID"},"name":{"bsonType":"string","title":"社区名称","minLength":2,"maxLength":50,"label":"社区名称","errorMessage":{"required":"{label}必填","minLength":"{label}长度不能少于{minLength}位","maxLength":"{label}长度不能大于{maxLength}位"}},"address":{"bsonType":"string","title":"社区地址","minLength":5,"maxLength":200,"label":"详细地址","errorMessage":{"required":"{label}必填","minLength":"{label}长度不能少于{minLength}位","maxLength":"{label}长度不能大于{maxLength}位"}},"location":{"bsonType":"object","title":"地理位置","properties":{"latitude":{"bsonType":"double","title":"纬度"},"longitude":{"bsonType":"double","title":"经度"}}},"property_company":{"bsonType":"string","title":"物业公司","maxLength":100,"label":"物业公司名称"},"property_phone":{"bsonType":"string","title":"物业电话","pattern":"^\\d{7,15}$","label":"联系电话"},"manager_id":{"bsonType":"string","title":"社区管理员ID","foreignKey":"user._id","description":"社区管理员用户ID"},"description":{"bsonType":"string","title":"社区描述","maxLength":500,"label":"社区介绍"},"facilities":{"bsonType":"array","title":"社区设施","items":{"bsonType":"string"},"description":"社区配套设施列表"},"building_count":{"bsonType":"int","title":"楼栋数量","minimum":1,"default":1},"unit_count":{"bsonType":"int","title":"单元数量","minimum":1,"default":1},"household_count":{"bsonType":"int","title":"总户数","minimum":1,"default":1},"status":{"bsonType":"int","title":"社区状态","enum":[0,1,2],"enumText":["正常","维护中","停用"],"default":0,"label":"状态"},"create_time":{"bsonType":"timestamp","title":"创建时间","defaultValue":{"$env":"now"},"forceDefaultValue":true},"update_time":{"bsonType":"timestamp","title":"更新时间","defaultValue":{"$env":"now"}}},"indexes":[{"name":"idx_name","fields":["name"]},{"name":"idx_status","fields":["status"]},{"name":"idx_manager","fields":["manager_id"]}]}