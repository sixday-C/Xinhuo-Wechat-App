{"bsonType":"object","required":["feedback_id","user_id","content"],"permission":{"read":"doc.feedback_id.user_id == auth.uid || 'property' in auth.role","create":"'property' in auth.role","update":"doc.user_id == auth.uid","delete":"false"},"properties":{"_id":{"description":"自动生成的回复ID"},"feedback_id":{"bsonType":"string","title":"反馈ID","foreignKey":"feedBack._id","description":"关联的反馈记录ID"},"user_id":{"bsonType":"string","title":"回复人ID","foreignKey":"user._id","description":"回复人用户ID（通常是物业人员）"},"content":{"bsonType":"string","title":"回复内容","minLength":5,"maxLength":1000,"label":"回复内容","errorMessage":{"required":"{label}必填","minLength":"{label}字数不能少于{minLength}字","maxLength":"{label}字数不能超过{maxLength}字"}},"reply_type":{"bsonType":"string","title":"回复类型","enum":["official","update","solution","close"],"enumText":["官方回复","进度更新","解决方案","关闭说明"],"default":"official","label":"回复类型"},"images":{"bsonType":"array","title":"回复图片","description":"回复附带的图片文件ID列表","items":{"bsonType":"string","format":"fileid","label":"图片文件ID"},"maxCount":3},"is_public":{"bsonType":"bool","title":"是否公开","default":true,"description":"是否对反馈人公开显示"},"create_time":{"bsonType":"timestamp","title":"回复时间","defaultValue":{"$env":"now"},"forceDefaultValue":true},"update_time":{"bsonType":"timestamp","title":"更新时间","defaultValue":{"$env":"now"}}},"indexes":[{"name":"idx_feedback_time","fields":["feedback_id","create_time"]},{"name":"idx_user_time","fields":["user_id","create_time"]},{"name":"idx_public","fields":["is_public"]}]}